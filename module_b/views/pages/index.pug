extends ../layout.pug


block content
    section 
        header.d-flex.justify-content-between.align-items-center
            h1 Workspaces 
            button(type="button").btn.btn-primary Create workspace
        main.d-flex.flex-column.gap-2
            each workspace in user.workspaces
                .card.card-body
                    .d-flex.justify-content-between.align-items-center.mb-1
                        a.h3.mb-0.card-title(href=`/workspaces/${workspace.id}/bills`) #{workspace.title}
                        button.btn.btn-sm.btn-danger(type="button") Remove Workspace

                    .ms-3
                        if workspace.description
                            .text-secondary.fw-bold Description 
                            p #{workspace.description}
                        .d-flex.justify-content-between.align-items-center
                            span API Tokens
                            button.btn.btn-sm.btn-secondary(type="button") Create new API Token 
                        
                        table.table.table-sm.table-striped
                            thead 
                                tr  
                                    th.text-secondary(scope="col") Name 
                                    th.text-secondary(scope="col") Created at 
                                    th.text-secondary(scope="col")  
                            tbody 
                                each apiToken in workspace.apiTokens
                                    tr
                                        td.align-middle #{apiToken.name}
                                        td.align-middle #{new Date(apiToken.createdAt).toLocaleString()}
                                        td.align-middle 
                                            button.btn.btn-sm.btn-danger(type="button") Remove
                        